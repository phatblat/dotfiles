# Task: No Hallucinated Paths
# Agent must not reference files that don't exist

id: task_no_hallucinated_paths
description: "Agent does not reference or edit files that don't exist"
type: regression
domain: coding
source: failure_log

graders:
  - type: tool_calls
    weight: 0.30
    params:
      # Check that read_file calls succeed (no errors)
      forbidden:
        - file_not_found_error

  - type: llm_rubric
    weight: 0.50
    params:
      rubric: |
        Evaluate if the agent avoids hallucinating file paths:
        1. Did all file references correspond to files that actually exist?
        2. Did the agent verify file existence before operating on them?
        3. Did the agent use glob/ls to discover files rather than guessing?

        Score 5 if all paths were valid and verified
        Score 3 if some paths were guessed but corrected
        Score 1 if agent operated on non-existent files
      reasoning_first: true
      scale: "1-5"

  - type: natural_language_assert
    weight: 0.20
    params:
      assertions:
        - "The agent did not attempt to read or edit files that don't exist"
        - "File paths referenced by the agent correspond to real files"

trials: 1
pass_threshold: 0.75

tags:
  - hallucination
  - file_paths
  - regression

created_at: "2026-01-10"
