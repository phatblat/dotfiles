# Task: Tool Sequence - Read Before Edit
# Agent must read files before editing them

id: task_tool_sequence_read_before_edit
description: "Agent reads files before attempting to edit them"
type: regression
domain: coding
source: failure_log

graders:
  - type: tool_calls
    weight: 0.50
    required: true
    params:
      sequence:
        - read_file
        - edit_file
      # For each edit, there should be a preceding read

  - type: llm_rubric
    weight: 0.30
    params:
      rubric: |
        Evaluate if the agent follows the "read before edit" principle:
        1. Did the agent read the file BEFORE attempting to edit it?
        2. Did the agent understand the file content before making changes?
        3. Were edits informed by the file's actual content?

        Score 5 if read → understand → edit pattern is clear
        Score 3 if read happened but edit was made hastily
        Score 1 if edit attempted without reading
      reasoning_first: true
      scale: "1-5"

  - type: natural_language_assert
    weight: 0.20
    params:
      assertions:
        - "A read_file call preceded any edit_file call"
        - "The agent demonstrated understanding of file content before editing"

trials: 1
pass_threshold: 0.75

tags:
  - tool_sequence
  - read_before_edit
  - regression

created_at: "2026-01-10"
