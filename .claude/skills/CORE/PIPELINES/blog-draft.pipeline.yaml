# ============================================================================
# PIPELINE: blog-draft
# ============================================================================
#
# Proofread blog content and open in browser for review.
#
# USAGE:
#   pai pipeline blog-draft --content "My blog post content here..."
#   pai pipeline blog-draft --file /path/to/draft.md
#
# ============================================================================

name: blog-draft
version: "1.0.0"
description: Proofread content and open in browser for review

input:
  content:
    type: string
    required: true
    description: The blog content to proofread

output:
  corrected:
    type: string
    description: The proofread content
  changeCount:
    type: number
    description: Number of corrections made
  url:
    type: string
    description: Local URL where content is served

steps:
  # Step 1: Proofread the content
  - id: proofread
    action: blog/proofread
    input:
      content: "{{input.content}}"

  # Step 2: Open in browser (built-in action)
  - id: preview
    action: _builtin/preview-markdown
    input:
      content: "{{steps.proofread.output.corrected}}"
      title: "Proofread Draft"

output_mapping:
  corrected: "{{steps.proofread.output.corrected}}"
  changeCount: "{{steps.proofread.output.changeCount}}"
  url: "{{steps.preview.output.url}}"
